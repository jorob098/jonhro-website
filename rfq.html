<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Request for Quotation - Jonhro Robles, LCB</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Spinner */
    .spinner {
      border: 2px solid #f3f3f3;
      border-top: 2px solid #FF6B00;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      animation: spin 0.8s linear infinite;
      display: inline-block;
      vertical-align: middle;
      margin-left: 8px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
<header class="header">
  <div class="logo-title">
    <img src="jrlogo.svg" alt="Jonhro Robles Logo">
    <a href="index.html" class="site-name">Jonhro<span> Robles, LCB</span></a>
  </div>
  <nav class="desktop-nav">
    <ul class="nav-links">
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#services">Services</a></li>
      <li><a href="index.html#contact">Contact</a></li>
    </ul>
  </nav>
</header>

<div class="rfq-page">
  <h1>Request for Quotation</h1>
  <form class="rfq-form" id="rfq-form">
    <label>Name:
      <input type="text" name="name" required>
    </label>
    <label>Email:
      <input type="email" name="email" required>
    </label>
    <label>Company:
      <input type="text" name="company">
    </label>
    <label>Details / What do you need?:
      <textarea name="details" rows="5" required></textarea>
    </label>

    <!-- reCAPTCHA widget -->
    <div class="g-recaptcha" data-sitekey="6LdtQX4rAAAAACZoAbCDipQ33sQQxpEVCCz6U580" data-size="compact"></div>

    <button type="submit" id="submit-btn">Submit RFQ</button>
  </form>
  <div id="success-message" style="display:none;">Thank you! We received your request.</div>
</div>

<script>
const scriptURL = 'https://script.google.com/macros/s/AKfycbxm_o_SYMYox7vy9tDNR2Qt4ZmIddDs4Y22MabcpqYr_BatAu-jnOsSq48_lIZ5TXhHGw/exec';

document.getElementById('rfq-form').addEventListener('submit', e => {
  e.preventDefault();

  const form = e.target;
  const submitBtn = document.getElementById('submit-btn');
  const recaptchaResponse = grecaptcha.getResponse();

  if (!recaptchaResponse) {
    alert('Please complete the CAPTCHA.');
    return;
  }

  // Disable button & show spinner
  submitBtn.disabled = true;
  submitBtn.innerHTML = 'Submitting <span class="spinner"></span>';

  const jsonData = {
    name: form.name.value,
    email: form.email.value,
    company: form.company.value,
    details: form.details.value,
    recaptcha: recaptchaResponse
  };

  fetch(scriptURL, {
    method: 'POST',
    mode: 'no-cors',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(jsonData)
  })
  .then(() => {
    form.reset();
    grecaptcha.reset();
    document.getElementById('success-message').style.display = 'block';
    submitBtn.disabled = false;
    submitBtn.textContent = 'Submit RFQ';
    setTimeout(() => {
      document.getElementById('success-message').style.display = 'none';
    }, 5000);
  })
  .catch(error => { 
    console.error('Fetch error:', error);
    alert('Fetch error: ' + error);
    submitBtn.disabled = false;
    submitBtn.textContent = 'Submit RFQ';
  });
});
</script>

<!-- Load reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<!-- Optional: Tawk.to Chat -->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/686e628db9e89e190d9937e1/1ivnj1u86';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>

</body>
</html>
